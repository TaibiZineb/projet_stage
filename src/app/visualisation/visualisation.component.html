<div class="flex">
  <div class=" mx-auto px-4 mb-6 relative w-full">
    <h1 class="text-4xl text-center font-bold text-gray-800 w-full">Visualisation CVs</h1>
    <div class="flex mt-4 justify-end">
      <a class=" bg-gray-200 hover:bg-gray-300 py-2 px-4 rounded" routerLink="/admin/dashboard"><svg width="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19 12H5" stroke="#72849A" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 19L5 12L12 5" stroke="#72849A" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"></path></svg>
       </a>
    </div>
    <div class="flex flex-wrap">
      <div class="formVisualisation  w-full lg:w-1/2 mx-auto px-4 mb-6 relative">
        <div class="w-full bg-slate-100 p-4 mt-2">
          <form class="w-full" [formGroup]="visualisationForm" (ngSubmit)="onSubmit()">
            <!--Détails du candidat-->
            <section class="Détails du candidat">
              <div class="flex flex-row">
                <svg width="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21.2805 18.7359C20.7752 17.5391 20.0419 16.4519 19.1216 15.535C18.204 14.6155 17.117 13.8824 15.9207 13.3761C15.9099 13.3708 15.8992 13.3681 15.8885 13.3627C17.5573 12.1574 18.6421 10.194 18.6421 7.9788C18.6421 4.30915 15.6689 1.33594 11.9992 1.33594C8.32959 1.33594 5.35637 4.30915 5.35637 7.9788C5.35637 10.194 6.44119 12.1574 8.10994 13.3654C8.09923 13.3708 8.08852 13.3734 8.0778 13.3788C6.8778 13.885 5.80102 14.6109 4.87691 15.5377C3.95738 16.4553 3.22424 17.5423 2.71798 18.7386C2.22063 19.9098 1.9524 21.1655 1.9278 22.4377C1.92709 22.4663 1.9321 22.4948 1.94255 22.5214C1.953 22.548 1.96867 22.5723 1.98864 22.5927C2.00861 22.6132 2.03247 22.6295 2.05883 22.6406C2.08518 22.6517 2.11349 22.6574 2.14209 22.6574H3.74923C3.86709 22.6574 3.96084 22.5636 3.96352 22.4484C4.01709 20.3806 4.84744 18.444 6.3153 16.9761C7.83405 15.4574 9.85102 14.6217 11.9992 14.6217C14.1474 14.6217 16.1644 15.4574 17.6832 16.9761C19.151 18.444 19.9814 20.3806 20.0349 22.4484C20.0376 22.5663 20.1314 22.6574 20.2492 22.6574H21.8564C21.885 22.6574 21.9133 22.6517 21.9396 22.6406C21.966 22.6295 21.9899 22.6132 22.0098 22.5927C22.0298 22.5723 22.0455 22.548 22.0559 22.5214C22.0664 22.4948 22.0714 22.4663 22.0707 22.4377C22.0439 21.1574 21.7787 19.9118 21.2805 18.7359V18.7359ZM11.9992 12.5859C10.7698 12.5859 9.61262 12.1065 8.74209 11.2359C7.87155 10.3654 7.39209 9.20826 7.39209 7.9788C7.39209 6.74933 7.87155 5.59219 8.74209 4.72165C9.61262 3.85112 10.7698 3.37165 11.9992 3.37165C13.2287 3.37165 14.3858 3.85112 15.2564 4.72165C16.1269 5.59219 16.6064 6.74933 16.6064 7.9788C16.6064 9.20826 16.1269 10.3654 15.2564 11.2359C14.3858 12.1065 13.2287 12.5859 11.9992 12.5859Z" fill="#0056FC"></path></svg>
                <p class="text-blue-600 p-4 mt-2">Détails du candidat</p>
              </div>
              <!--Nom & Prenom-->
              <div class="flex flex-wrap -mx-3 mb-6">
                <section class="w-full md:w-1/2 px-3 mb-6 md:mb-0" id="firstName" label="First Name" placeholder="Prenom" type="text" >
                  <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2">* prenom</label><input id="firstName"  formControlName="firstName" label="First Name" placeholder="Nom" type="text" class="appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white hover:border-2 hover:border-blue-500">
                  <div *ngIf="visualisationForm.get('firstName')?.touched && visualisationForm.get('firstName')?.errors?.['required']" class="text-red-500 text-xs italic">Ce champ est obligatoire.</div>
                </section>
                <section class="w-full md:w-1/2 px-3" id="lastName" label="Last Name" placeholder="Last Name" type="text"   style="width: 50%;">
                  <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2">*nom</label>
                  <input id="lastName"  formControlName="lastName" label="Last Name" placeholder="Nom" type="text" class="appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white hover:border-2 hover:border-blue-500">
                  <div *ngIf="visualisationForm.get('lastName')?.touched && visualisationForm.get('lastName')?.errors?.['required']" class="text-red-500 text-xs italic">Ce champ est obligatoire.</div>
                </section>
              </div>
              <!--Email & Phone-->
              <div class="flex flex-wrap -mx-3 mb-6">
                <section class="w-full md:w-1/2 px-3 mb-6 md:mb-0">
                  <section id="email" label="Email" placeholder="Email" type="text" value="">
                    <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2">* Email</label><input id="email" formControlName="Email" label="Email" placeholder="Email" type="text" class="appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white" id="grid-emil">
                  </section>
                  <div *ngIf="visualisationForm.get('Email')?.touched && visualisationForm.get('Email')?.errors?.['Email']" class="text-red-500 text-xs italic">Veuillez entrer une adresse email valide.</div>
                </section>
                <section class="w-full md:w-1/2 px-3">
                  <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-prenom">Téléphone</label>
                  <input formControlName="telephone" class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="grid-telephone" type="tel" placeholder="+212 66 666 66 66">
                  <div *ngIf="visualisationForm.get('telephone')?.touched && visualisationForm.get('telephone')?.errors?.['pattern']" class="text-red-500">Veuillez entrer un numéro de téléphone valide dans le format demandé (ex. 0600.000.000).</div>
                </section>
              </div>
            <!--rôle & Années d'expérience-->
            <div class="flex flex-wrap -mx-3 mb-6">
              <section class="w-full md:w-1/2 px-3 mb-6 md:mb-0">
                <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-nom">*Rôle</label>
                <input formControlName="role" class="appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white" id="grid-role" type="text" placeholder="Rôle">
                <div *ngIf="visualisationForm.get('role')?.touched && visualisationForm.get('role')?.errors?.['required']" class="text-red-500 text-xs italic">Ce champ est obligatoire.</div>
              </section>
              <section class="w-full md:w-1/2 px-3">
                <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-prenom">Années d'expérience</label>
                <input formControlName="Anneesexperience" class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" id="grid-telephone" type="text" placeholder="Années d'expérience">
              </section>
            </div>
            </section>
            <!--Historique professionnel-->
            <section class="Historique professionnel">
              <div class="flex flex-row">
                <svg width="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21.1667 5.58203H16.5833V4.66536C16.5833 3.65426 15.7611 2.83203 14.75 2.83203H9.25C8.23889 2.83203 7.41667 3.65426 7.41667 4.66536V5.58203H2.83333C1.82222 5.58203 1 6.40426 1 7.41536V19.332C1 20.3431 1.82222 21.1654 2.83333 21.1654H21.1667C22.1778 21.1654 23 20.3431 23 19.332V7.41536C23 6.40426 22.1778 5.58203 21.1667 5.58203ZM8.33333 4.66536C8.33333 4.16003 8.74467 3.7487 9.25 3.7487H14.75C15.2553 3.7487 15.6667 4.16003 15.6667 4.66536V5.58203H8.33333V4.66536ZM21.1667 20.2487H2.83333C2.328 20.2487 1.91667 19.8374 1.91667 19.332V12.6604C2.1874 12.8183 2.49792 12.9154 2.83333 12.9154H10.1667V14.2904C10.1667 14.5437 10.3717 14.7487 10.625 14.7487H13.375C13.6283 14.7487 13.8333 14.5437 13.8333 14.2904V12.9154H21.1667C21.5021 12.9154 21.8126 12.8183 22.0833 12.6604V19.332C22.0833 19.8374 21.672 20.2487 21.1667 20.2487ZM11.0833 13.832V11.9987H12.9167V13.832H11.0833ZM21.1667 11.9987H13.8333V11.5404C13.8333 11.287 13.6283 11.082 13.375 11.082H10.625C10.3717 11.082 10.1667 11.287 10.1667 11.5404V11.9987H2.83333C2.328 11.9987 1.91667 11.5874 1.91667 11.082V7.41536C1.91667 6.91003 2.328 6.4987 2.83333 6.4987H21.1667C21.672 6.4987 22.0833 6.91003 22.0833 7.41536V11.082C22.0833 11.5874 21.672 11.9987 21.1667 11.9987Z" stroke-width="0.916667" stroke="#0056FC"></path></svg>
                <p class="text-blue-600 p-4 mt-2">Historique professionnel</p>
              </div>
                <div id="container">
                  <div class="blocks">
                    <details class="accordion border-solid border-2 rounded border-gray-200 transition-all ease-in-out duration-300" open>
                      <summary class="accordion__title cursor-pointer text-lg font-bold text-gray-700 py-3 px-3 relative hover:text-blue-500">Stage</summary>
                      <div class="accordion__content px-3 py-1">
                        <!--Nom de l'entreprise & Intitulé du poste-->
                        <div class="flex flex-wrap -mx-3 mb-6">
                          <div class="w-full md:w-1/2 px-3">
                            <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-nom">*Nom de l'entreprise</label>
                            <input formControlName="Nomentreprise" class="appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white hover:border-2 hover:border-blue-500" id="grid-Nomentreprise" type="text" placeholder="Nom de l'entreprise" >
                            <div *ngIf="visualisationForm.get('Nomentreprise')?.touched && visualisationForm.get('Nomentreprise')?.errors?.['required']" class="text-red-500 text-xs italic">Ce champ est obligatoire.</div>
                          </div>
                          <div class="w-full md:w-1/2 px-3">
                            <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-Intituleposte">*Intitulé du poste</label>
                            <input formControlName="Intituleposte" class="appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white hover:border-2 hover:border-blue-500" id="grid-Intituléposte" type="text" placeholder="Intitulé du poste" >
                            <div *ngIf="visualisationForm.get('Intituleposte')?.touched && visualisationForm.get('Intituleposte')?.errors?.['required']" class="text-red-500 text-xs italic">Ce champ est obligatoire.</div>
                          </div>
                        </div>
                        <!--Date debut & fin-->
                        <div class="flex flex-wrap -mx-3 mb-6">
                          <div class="w-full md:w-1/2 px-3 mb-6 md:mb-0">
                            <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-Datedebut">*Date de début</label>
                            <input formControlName="Datedebut" 
                              class="appearance-none block w-full bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white hover:border-2 hover:border-blue-500" 
                              id="grid-Datedebut" 
                              type="month"
                              (input)="onDateInput($event, 'Datedebut')">
                            <div *ngIf="visualisationForm.get('Datedebut')?.touched && visualisationForm.get('Datedebut')?.errors?.['required']" class="text-red-500 text-xs italic">Ce champ est obligatoire.</div>
                          </div>
                          <div class="w-full md:w-1/2 px-3 mb-6 md:mb-0">
                            <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-Datefin">*Date de fin</label>
                            <div class="flex items-center">
                              <input formControlName="Datefin" *ngIf="!isDateFinChecked(1)" class="appearance-none block w-10/12 bg-gray-200 text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white hover:border-2 hover:border-blue-500" id="grid-Datefin" type="month" [min]="getMinimumDate('Datedebut')" 
                              [max]="getMaximumDate('Datefin')"   >
                              <span *ngIf="isDateFinChecked(1)">Jusqu'à présent</span>
                              <label class="ml-2 text-sm text-gray-700">
                                <input type="checkbox" class="form-checkbox h-4 w-4 " formControlName="present1">
                                Jusqu'à présent
                              </label>
                            
                            </div>
                            
                          </div>
                        </div>
                        <!--Description-->
                        <div class="flex flex-wrap -mx-3 mb-6">
                          <div class="w-full  px-3 mb-6 md:mb-0">
                            <label class="block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2" for="grid-nom">Description</label>
                            <textarea id="description" formControlName="description" rows="4" class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500" placeholder="Brève description du rôle"></textarea>
                          </div>
                        </div>
                      </div>
                    </details> 
                  </div>
                </div>
                <button class="border-solid border-2 border-gray-200 font-bold py-2 px-4 rounded mt-2 text-cyan-600" >Ajouter un nouveau <i class="bi bi-plus-circle-fill"></i></button>
                
            </section>
      
            <div class="flex flex-wrap my-4 justify-center">
              <button class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded my-4" type="submit" (click)="onSubmit()">Confirmer</button>
            </div>
          </form>
        </div>
      </div>
      <div class="visualisationD w-full lg:w-1/2  mx-auto px-2 mb-4 relative">
        <div class="w-full bg-gray-200 p-4 mt-2">
          <section *ngIf="isDataSubmitted" class=" bg-slate-50">
            <div class="wrapper templateId2 " id="cv">
              <table class="table_class header_table">
                <tbody>
                  <!--Détails du candidat-->
                  <tr><td class="candidate_details text-left pt-10">
                    <ng-container>
                      <h2 class="text-3xl text-blue-600 font-bold inline-block" *ngIf="submittedData && submittedData.firstName">{{ submittedData.firstName.charAt(0).toUpperCase() + '.' || '' }}</h2>
                      <h2 class="text-3xl text-blue-600 font-bold inline-block"*ngIf="submittedData && submittedData.lastName">{{ submittedData.lastName.charAt(0).toUpperCase() + '.' || '' }}</h2>
                    <h3 class="text-xl text-blue-500" *ngIf="submittedData && submittedData.role" >{{ submittedData.role }}</h3>
                    <h3 class="text-xl text-slate-400 my-1 font-normal" *ngIf="submittedData && submittedData.Anneesexperience">{{ submittedData.Anneesexperience }}</h3>
                  </ng-container>
                    <br />
                  </td></tr>
                </tbody>
              </table>
              <hr class="horizontal_line bg-slate-950" />
              <table class="table_class table_container">
                <tbody>
                  <tr><td class="leftpart">
                    <table class="table_class">
                      <tbody>
                        <!--top compétance-->
                        <tr><th class="th_title text-blue-500 text-xs uppercase">top&nbsp;compétance(s)</th></tr>
                       
                        <!--historique professionnel-->
                        <tr><th class="th_title text-blue-500 text-xs uppercase">historique&nbsp;professionnel</th></tr>
                        <tr><td>
                          <table class="table_class">
                            <tbody>
                              <tr ><th class="heading text-left text-base leading-3 pt-2" *ngIf="submittedData && submittedData.Intituleposte">{{ submittedData.Intituleposte }}</th></tr>
                              <tr><td class="employer_name" *ngIf="submittedData && submittedData.Nomentreprise">{{ submittedData.Nomentreprise }}</td></tr>
                              <tr><td class="employment_duration" *ngIf="submittedData && submittedData.Datedebut && submittedData.Datefin">{{ submittedData.Datedebut + ' - ' + submittedData.Datefin }}</td></tr>
                              <tr><td>
                                <div class="employment_history relative left-0 line-height-5">{{ submittedData.description }}</div></td></tr>
                            </tbody>
                          </table>
                        </td></tr>
                        <!--education-->
                        <tr class="tr_title"><th class="th_title text-blue-500 text-xs uppercase">éducation</th></tr>
                        <tr><td>
                          <table >
                            <tbody>
                              <tr><th class="heading text-left text-base leading-3 pt-2" *ngIf="submittedData && submittedData.Diplome">{{ submittedData.Diplome }}</th></tr>
                              <tr><td class="employer_name" *ngIf="submittedData && submittedData.Nom_ecole">{{ submittedData.Nom_ecole }}</td></tr>
                              <tr><td class="edu_duration" *ngIf="submittedData && submittedData.DatedebutF && submittedData.datefinF">{{ submittedData.DatedebutF + ' ' + submittedData.datefinF +  ' '+ submittedData.VilleE }}</td></tr>
                            </tbody>
                          </table>
                        </td></tr>
                      </tbody>
                    </table>
                  </td>
                  <td class="rightpart">
                    <table class="table_class">
                      <tbody>
                        <tr><td>
                          <table class="other_skills table_class">
                            <tbody>
                              <tr class="tr_title"><th class="th_title text-blue-500 text-xs uppercase">autre &nbsp;compétance(s)</th></tr>
                              <tr><td>
                                <table class="table_class">
                                  <tbody>
                                    <ul class="top_skills_table_ul w-full flex flex-row flex-grow justify-center items-center outline-solid border-2 border-green-500 rounded ul_class">
                                      <li class="top_skills_table_li li_class"  *ngIf="submittedData && submittedData.Intituleposte">{{ submittedData.Intituleposte }}
                                      </li>
                                    </ul>
                                  </tbody>
                                </table>
                              </td></tr>
                            </tbody>
                          </table>
                        </td></tr>
                        <tr><td>
                          <table class="table_class">
                            <tbody>
                              <tr>
                                <th class="th_title text-blue-500 text-xs uppercase">languages</th>
                              </tr>                              
                              <tr><td>
                                <table >
                                  <tbody>
                                    <tr><th class="heading text-left text-base leading-3 pt-2"  *ngIf="submittedData && submittedData.titre_langue"> {{ submittedData.titre_langue }}</th></tr>
                                    <tr><td class="rightpart_text"*ngIf="submittedData && submittedData.niveaulang" > {{ submittedData.niveaulang }}</td></tr>
                                  </tbody>
                                </table>
                              </td></tr>
                            </tbody>
                          </table>
                        </td></tr>
                        <tr><td>
                          <table class="table_class">
                              <tbody>
                                <tr><th class="th_title text-blue-500 text-xs uppercase">certifications</th></tr>
                                <tr ><td>
                                  <table class="table_class">
                                    <tbody>
                                      <tr><th class="heading text-left text-base leading-3 pt-2" *ngIf="submittedData && submittedData.titre_certificat"> {{ submittedData.titre_certificat }}</th></tr>
                                      <tr><td *ngIf="submittedData && submittedData.dateCert"> {{ submittedData.dateCert }}</td></tr>
                                    </tbody>
                                  </table>
                                </td></tr>
                              </tbody>
                          </table>
                        </td></tr>
                      </tbody>
                    </table>
                  </td></tr>
                </tbody>
              </table>
            </div>
          </section>
        </div>
      </div>
    </div>
  </div>
</div>
